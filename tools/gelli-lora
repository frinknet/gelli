#!/usr/bin/env sh
set -e

LORAS=$@

fetch() {
  repo="$1"
  dest="/loras/$(basename "$repo").gguf"
  url="https://huggingface.co/$repo/resolve/main/lora.gguf"

  if [ -f "$dest" ]; then
    echo "✓ cached $dest"
  else
    echo "↓ $repo → $dest"

    wget -qO "$dest" "$url"
  fi
}

if [ "$1" = "list" ]; then
  cd /loras
  ls
  exit 0
fi

for l in $LORAS; do
  fetch "$l"
done
