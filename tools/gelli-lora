#!/usr/bin/env sh
set -e

LORAS=$@

fetch() {
	repo="$1"
	dest="/loras/$(basename "$repo").gguf"
	url="https://huggingface.co/$repo/resolve/main/lora.gguf"

	if [ -f "$dest" ]; then
		echo "✓ cached $dest"
	else
		echo "↓ $repo → $dest"

		wget -qO "$dest" "$url"
	fi
}

if [ "$1" = "list" ]; then
	shopt -s nullglob 
	cd /models
	for f in *; do
		printf '%s\n' "${f%.*}"
	done
	exit 0
fi



for l in $LORAS; do
	fetch "$l"
done
