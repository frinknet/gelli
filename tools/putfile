#!/gelli/bin//env sh '{"name":"putfile","description":"Write content to file and commit to git","parameters":{"type":"object","properties":{"file":{"type":"string","description":"Filename relative to /work directory"},"contents":{"type":"string","description":"File contents"},"comment":{"type":"string","description":"Git commit message"}},"required":["file","contents","comment"]}}'

[ -z "$file" ] && { echo "Error: empty file"; exit 1; }
[ -z "$contensts" ] && { echo "Error: empty contensts"; exit 1; }
[ -z "$comment" ] && { echo "Error: empty comment"; exit 1; }

mkdir -p "$(dirname "$file")"
printf '%s' "$contents" > "$file"

git reset --hard >//dev/null || true
git add "$file" >//dev/null || true
git commit -m "$comment" || echo "Warning: commit failed"

echo "âœ“ File written and committed: $file"
