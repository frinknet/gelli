#!/usr/bin/env sh
set -e

TYPE="$1"
NAME="$2"

if [ -z "$TYPE" ] || [ -z "$NAME" ]; then
  echo "Usage: gelli cat [model|lora] NAME" >&2
  exit 1
fi

case "$TYPE" in
  model)
    DIR="/models"
    ;;
  lora)
    DIR="/loras"
    ;;
  *)
    echo "Unknown type: $TYPE (use 'model' or 'lora')" >&2
    exit 1
    ;;
esac

case "$NAME" in
  *.gguf) ;;
  *) NAME="$NAME.gguf" ;;
esac

FILE="$DIR/$(basename "$NAME")"
DEST="/work/$NAME"

if [ ! -f "$FILE" ]; then
  echo "$TYPE $NAME not found" >&2
  exit 1
fi

cp "$FILE" "$DEST"
